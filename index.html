<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Hiking & Motorcycling — Petru & Ioana</title>

<!-- Fonts -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

<!-- Leaflet CSS -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet@1.9.4/dist/leaflet.css" />

<!-- Tailwind -->
<script src="https://cdn.tailwindcss.com"></script>
<script>
tailwind.config = {
  theme: {
    extend: {
      colors: {
        primary: '#e74c3c',
        'primary-hover': '#c0392b',
        bg: '#0a0a0a',
        card: '#151515',
        muted: '#888',
        frame: '#1f1f1f',
        border: '#333',
        'border-light': '#2a2a2a',
        text: '#ffffff',
        'text-secondary': '#e0e0e0',
      },
      boxShadow: {
        sm: '0 2px 4px rgba(0,0,0,0.3)',
        md: '0 4px 12px rgba(0,0,0,0.4)',
        lg: '0 8px 24px rgba(0,0,0,0.5)',
      },
      fontFamily: {
        inter: ['Inter','-apple-system','BlinkMacSystemFont','Segoe UI','Arial','sans-serif'],
      }
    }
  }
}
</script>

<style>
html, body { background: #0a0a0a; }
.custom-scrollbar::-webkit-scrollbar { width: 0; height: 0; background: transparent; }
.hide-scrollbar { scrollbar-width: none; -ms-overflow-style: none; }
.hide-scrollbar::-webkit-scrollbar { display: none; }
</style>
</head>
<body class="bg-bg text-text font-inter antialiased min-h-screen max-w-full overflow-x-hidden">

<!-- DESKTOP HEADER -->
<header class="hidden md:flex fixed inset-x-0 top-0 h-[200px] bg-gradient-to-b from-black via-bg to-[#0f0f0f] flex items-center justify-center border-b border-border shadow-md z-[800] px-7 py-[18px] box-border">
  <div class="flex flex-col md:flex-row items-center gap-6 md:gap-10">
    <div class="hero-photo left w-[104px] h-[104px] rounded-full overflow-hidden border-4 border-frame shadow-md shadow-black/30 hover:shadow-lg hover:shadow-black/50 transition-all duration-200 flex-shrink-0 bg-[#0d0d0d]">
      <img src="images/petru_ioana.jpeg" alt="Petru and Ioana" loading="lazy" class="w-full h-full object-cover" />
    </div>
    <div class="title text-center leading-tight flex flex-col gap-2">
      <h1 class="text-[28px] font-bold tracking-[0.2px] text-text m-0">GPX Routes — by Petru & Ioana</h1>
      <h2 class="text-[28px] font-bold tracking-[0.2px] text-text m-0">Hiking Trails & Motorcycle Rides</h2>
      <div class="subtitle text-base text-muted font-medium">Pick a route, explore the map, and download GPX for free.</div>
    </div>
    <div class="hero-photo right w-[104px] h-[104px] rounded-full overflow-hidden border-4 border-frame shadow-md shadow-black/30 hover:shadow-lg hover:shadow-black/50 transition-all duration-200 flex-shrink-0 bg-[#0d0d0d]">
      <img src="images/motorcycle.jpeg" alt="Motorcycle" loading="lazy" class="w-full h-full object-cover" />
    </div>
  </div>
</header>

<div class="flex flex-col md:grid md:grid-cols-[320px_1fr_320px] lg:grid-cols-[360px_1fr_360px] gap-[18px] px-[18px] pb-[18px] pt-[200px] md:pt-[200px] min-h-[calc(100vh-200px)]">

  <!-- LEFT PANEL Hiking -->
  <aside id="hiking-panel" class="hidden md:flex flex-col gap-3 bg-gradient-to-b from-card to-[#121212] border border-border-light rounded-xl p-4 shadow-sm overflow-hidden">
    <h3 class="text-lg font-semibold flex justify-between items-center text-text tracking-[-0.01em] mb-0">Hiking Routes <span class="text-muted" id="hiking-count"></span></h3>
    <div class="flex justify-center w-full mt-2">
      <div class="toggle inline-flex border border-border rounded-2xl overflow-hidden bg-frame shadow-sm" data-kind="hiking">
        <button class="toggle-btn px-4 py-2 text-sm font-semibold cursor-pointer bg-primary text-white transition-colors duration-200" data-view="completed">Completed</button>
        <button class="toggle-btn px-4 py-2 text-sm font-medium cursor-pointer text-muted hover:text-text-secondary transition-colors duration-200" data-view="upcoming">Upcoming</button>
      </div>
    </div>
    <div class="flex gap-2 mt-2">
      <input id="search-hiking" placeholder="Search hiking routes..." class="flex-1 px-3 py-2 text-sm border border-border rounded-lg bg-frame text-text outline-none focus:border-primary focus:bg-card focus:ring-1 focus:ring-primary/10" />
      <button class="btn px-3 py-2 text-sm font-medium rounded-lg border border-border bg-card text-text-secondary cursor-pointer shadow-sm hover:bg-frame hover:text-text hover:-translate-y-0.5 hover:shadow-md transition-all duration-200" id="clear-hiking">Clear</button>
    </div>
    <div class="overflow-auto pr-1 flex flex-col flex-1 min-h-0" id="hiking-list" aria-live="polite"></div>
    <div class="upcoming-list overflow-auto pr-1 hidden flex-col gap-2 flex-1 min-h-0" id="hiking-upcoming-list" aria-live="polite"></div>
  </aside>

  <!-- RIGHT PANEL Motorcycle -->
  <aside id="motor-panel" class="hidden md:flex flex-col gap-3 bg-gradient-to-b from-card to-[#121212] border border-border-light rounded-xl p-4 shadow-sm overflow-hidden">
    <h3 class="text-lg font-semibold flex justify-between items-center text-text tracking-[-0.01em] mb-0">Motorcycle Routes <span class="text-muted" id="motor-count"></span></h3>
    <div class="flex justify-center w-full mt-2">
      <div class="toggle inline-flex border border-border rounded-2xl overflow-hidden bg-frame shadow-sm" data-kind="motorcycle">
        <button class="toggle-btn px-4 py-2 text-sm font-semibold cursor-pointer bg-primary text-white transition-colors duration-200" data-view="completed">Completed</button>
        <button class="toggle-btn px-4 py-2 text-sm font-medium cursor-pointer text-muted hover:text-text-secondary transition-colors duration-200" data-view="upcoming">Upcoming</button>
      </div>
    </div>
    <div class="flex gap-2 mt-2">
      <input id="search-motor" placeholder="Search motorcycle routes..." class="flex-1 px-3 py-2 text-sm border border-border rounded-lg bg-frame text-text outline-none focus:border-primary focus:bg-card focus:ring-1 focus:ring-primary/10" />
      <button class="btn px-3 py-2 text-sm font-medium rounded-lg border border-border bg-card text-text-secondary cursor-pointer shadow-sm hover:bg-frame hover:text-text hover:-translate-y-0.5 hover:shadow-md transition-all duration-200" id="clear-motor">Clear</button>
    </div>
    <div class="overflow-auto pr-1 flex flex-col flex-1 min-h-0" id="motor-list" aria-live="polite"></div>
    <div class="upcoming-list overflow-auto pr-1 hidden flex-col gap-2 flex-1 min-h-0" id="motor-upcoming-list" aria-live="polite"></div>
  </aside>

  <!-- MAP -->
  <main class="bg-gradient-to-b from-card to-[#0f0f0f] border border-border-light rounded-xl p-[14px] box-border flex flex-col gap-3 h-[60vh] md:h-full max-h-full shadow-sm hover:border-border hover:shadow-md transition-all duration-200 md:col-start-2 md:row-start-1">
    <div class="flex justify-between items-center">
      <div class="font-semibold text-sm">Map</div>
      <div class="map-controls flex gap-2 items-center justify-end">
        <button id="btn-tiles" class="px-4 py-2 text-sm font-medium rounded-lg bg-card border border-border cursor-pointer text-text-secondary hover:bg-frame hover:text-text transition-all duration-200 shadow-sm hover:shadow-md">Satellite</button>
        <button id="btn-clear" class="px-4 py-2 text-sm font-medium rounded-lg bg-card border border-border cursor-pointer text-text-secondary hover:bg-frame hover:text-text transition-all duration-200 shadow-sm hover:shadow-md">Clear routes</button>
      </div>
    </div>
    <div id="map" class="flex-1 rounded-xl overflow-hidden border-2 border-border shadow-sm"></div>
  </main>
</div>

<!-- MOBILE HEADER + MAP + Toggle -->
<div class="md:hidden flex flex-col min-h-screen">
  <header class="flex items-center justify-center h-[64px] border-b border-border px-2 bg-gradient-to-b from-black via-bg to-[#0f0f0f] gap-2">
    <img src="images/petru_ioana.jpeg" alt="Petru" class="w-[32px] h-[32px] rounded-full border-2 border-frame object-cover" />
    <div class="flex flex-col flex-1 min-w-0 text-center">
      <h1 class="text-[10px] font-bold text-text truncate">GPX Routes — by Petru & Ioana</h1>
      <h2 class="text-[9px] font-bold text-text truncate">Hiking Trails & Motorcycle Rides</h2>
      <div class="subtitle text-[9px] text-muted truncate">Pick a route, explore the map, and download GPX.</div>
    </div>
    <img src="images/motorcycle.jpeg" alt="Moto" class="w-[32px] h-[32px] rounded-full border-2 border-frame object-cover" />
  </header>
  <main class="w-full aspect-[4/3] min-h-[75vw] max-h-[75vw] bg-gradient-to-b from-card to-[#0f0f0f] border-b border-border relative">
    <div id="map-mobile" class="w-full h-full"></div>
    <div class="flex gap-2 absolute bottom-2 left-2 right-2">
      <button id="btn-hiking" class="flex-1 py-2 rounded-full bg-primary text-white font-semibold">Hiking</button>
      <button id="btn-moto" class="flex-1 py-2 rounded-full bg-gray-700 text-white font-semibold">Moto</button>
    </div>
  </main>
  <div class="px-2 pb-2 flex flex-col gap-2">
    <aside id="hiking-panel-mobile" class="hidden flex-col gap-2">
      <!-- same content dynamically rendered by JS -->
    </aside>
    <aside id="motor-panel-mobile" class="hidden flex-col gap-2">
      <!-- same content dynamically rendered by JS -->
    </aside>
  </div>
</div>

<!-- Leaflet + GPX -->
<script src="https://cdn.jsdelivr.net/npm/leaflet@1.9.4/dist/leaflet.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet-gpx/1.7.0/gpx.min.js"></script>

<!-- JS unificat GPX / toggles / search / clear -->
<script>
// === JS code identical cu codul desktop pentru GPX, parking, show/download, toggle buttons, search/clear
// doar ca verificam daca suntem pe mobile sau desktop pentru map target și panouri

const isMobile = window.innerWidth < 768;
const mapEl = isMobile ? document.getElementById('map-mobile') : document.getElementById('map');
const map = L.map(mapEl, {center:[50.5,4.5], zoom:7, preferCanvas:true});
const baseOSM = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {attribution:'© OpenStreetMap'});
const baseSat = L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {attribution:'Esri Satellite'});
let satOn = true; baseSat.addTo(map);
let currentGPX = null, parkingMarkers=[], activeShowButton=null, activeParkingButton=null;
const state = { completed:null, upcoming:{hiking:[],motorcycle:[]}, view:{hiking:'completed',motorcycle:'completed'} };

// Fetch JSON + render lists
Promise.all([
  fetch('./data/trasee.json').then(r=>r.json()),
  fetch('./data/hiking_upcoming.json').then(r=>r.ok?r.json():[]),
  fetch('./data/moto_upcoming.json').then(r=>r.ok?r.json():[]),
]).then(([completed,hikingUpcoming,motoUpcoming])=>{
  state.completed=completed||{};
  state.upcoming.hiking=hikingUpcoming||[];
  state.upcoming.motorcycle=motoUpcoming||[];
  setupToggles(); setupFilters();
  renderColumn('hiking'); renderColumn('motorcycle');
}).catch(err=>console.error(err));

function setupToggles(){
  document.querySelectorAll('.toggle').forEach(toggle=>{
    const kind = toggle.dataset.kind;
    toggle.querySelectorAll('.toggle-btn').forEach(btn=>{
      btn.addEventListener('click', ()=>{
        toggle.querySelectorAll('.toggle-btn').forEach(b=>b.classList.remove('bg-primary','text-white','font-semibold'));
        btn.classList.add('bg-primary','text-white','font-semibold');
        state.view[kind] = btn.dataset.view;
        renderColumn(kind);
      });
    });
  });

  // mobile Hiking/Moto toggle
  if(isMobile){
    const btnH = document.getElementById('btn-hiking');
    const btnM = document.getElementById('btn-moto');
    const hikingPanelMobile = document.getElementById('hiking-panel-mobile');
    const motorPanelMobile = document.getElementById('motor-panel-mobile');
    btnH.addEventListener('click', ()=>{hikingPanelMobile.classList.remove('hidden'); motorPanelMobile.classList.add('hidden'); btnH.classList.add('bg-primary'); btnH.classList.remove('bg-gray-700'); btnM.classList.remove('bg-primary'); btnM.classList.add('bg-gray-700');});
    btnM.addEventListener('click', ()=>{motorPanelMobile.classList.remove('hidden'); hikingPanelMobile.classList.add('hidden'); btnM.classList.add('bg-primary'); btnM.classList.remove('bg-gray-700'); btnH.classList.remove('bg-primary'); btnH.classList.add('bg-gray-700');});
    hikingPanelMobile.classList.remove('hidden'); btnH.classList.add('bg-primary');
  }
}

// alte functii: setupFilters, renderColumn, updateCount, renderCompleted, renderUpcoming, createRouteCard, loadAndShowGPX, addParkingPoint, escapeHtml
// aceleași ca în codul desktop, doar verificăm target container pentru mobile/desktop

</script>
</body>
</html>
